{"version":3,"sources":["components/LoginForm/LoginForm.js","views/LoginView.js","components/Notification/Notification.js"],"names":["LoginForm","state","email","password","errorMessage","handleChange","event","target","name","value","setState","handleSubmit","preventDefault","onLogin","props","showNotification","prevProps","prevState","this","error","onClearError","isAuthLoading","className","CSSTransition","in","classNames","timeout","unmountOnExit","Notification","onView","message","Loader","onSubmit","type","onChange","disabled","Component","mapDispatchToProps","authOperations","login","onClearErrorMessage","connect","authSelectors","getAuthLoading","getAuthError","LoginView","setTimeout"],"mappings":"sRAQMA,E,4MACJC,MAAQ,CACNC,MAAO,GACPC,SAAU,GACVC,aAAc,I,EAWhBC,aAAe,SAAAC,GAAU,IAAD,EACEA,EAAMC,OAAtBC,EADc,EACdA,KAAMC,EADQ,EACRA,MACd,EAAKC,SAAL,eAAiBF,EAAOC,K,EAG1BE,aAAe,SAAAL,GACbA,EAAMM,iBADgB,MAEM,EAAKX,MAAzBC,EAFc,EAEdA,MAAOC,EAFO,EAEPA,SACPU,EAAY,EAAKC,MAAjBD,QAER,OAAKX,EACAC,GAELU,EAAQ,CAAEX,QAAOC,kBACjB,EAAKO,SAAS,CAAER,MAAO,GAAIC,SAAU,MAHf,EAAKY,iBAAiB,yBADzB,EAAKA,iBAAiB,uB,EAO3CA,iBAAmB,SAAAX,GACjB,EAAKM,SAAS,CAAEN,kB,wDA1BlB,SAAmBY,EAAWC,GAAY,IAAD,EACPC,KAAKJ,MAA7BK,EAD+B,EAC/BA,MAAOC,EADwB,EACxBA,aACXD,IACFD,KAAKH,iBAAiBI,GACtBC,O,oBAyBJ,WAAU,IAAD,EACmCF,KAAKjB,MAAvCC,EADD,EACCA,MAAOC,EADR,EACQA,SAAUC,EADlB,EACkBA,aACjBiB,EAAkBH,KAAKJ,MAAvBO,cACR,OACE,qCACE,qBAAKC,UAAU,uBAAf,SACE,cAACC,EAAA,EAAD,CAAeC,KAAMpB,EAAcqB,WAAW,eAAeC,QAAS,IAAKC,eAAa,EAAxF,SACE,cAACC,EAAA,EAAD,CAAcC,OAAQX,KAAKH,iBAAkBe,QAAS1B,QAIzDiB,EACC,cAACU,EAAA,EAAD,IAEA,uBAAMC,SAAUd,KAAKP,aAArB,UACE,0CAEE,uBACEW,UAAU,QACVW,KAAK,QACLzB,KAAK,QACLC,MAAOP,EACPgC,SAAUhB,KAAKb,kBAGnB,6CAEE,uBACEiB,UAAU,QACVW,KAAK,WACLzB,KAAK,WACLC,MAAON,EACP+B,SAAUhB,KAAKb,kBAGnB,uBACA,wBACEiB,UAAU,gBACVW,KAAK,SACLE,UAAYjC,IAAUC,KAAeC,EAHvC,6B,GAxEYgC,aA2FlBC,EAAqB,CACzBxB,QAASyB,IAAeC,MACxBnB,aAAckB,IAAeE,qBAGhBC,eAVS,SAAAxC,GAAK,MAAK,CAChCoB,cAAeqB,IAAcC,eAAe1C,GAC5CkB,MAAOuB,IAAcE,aAAa3C,MAQIoC,EAAzBI,CAA6CzC,GC7F7C6C,UATG,WAChB,OACE,qCACE,uCACA,cAAC,EAAD,S,oHCqBSjB,E,4MAxBb3B,MAAQ,CACNG,aAAc,I,uDAGhB,WAAqB,IAAD,EACUc,KAAKJ,MAAzBe,EADU,EACVA,OAAQC,EADE,EACFA,QAChBZ,KAAKR,SAAS,CAAEN,aAAc0B,IAC9BgB,YAAW,kBAAMjB,EAAO,MAAK,O,gCAE/B,SAAmBb,EAAWC,GAAY,IAAD,EACXC,KAAKJ,MAAzBe,EAD+B,EAC/BA,OAAQC,EADuB,EACvBA,QACR1B,EAAiBc,KAAKjB,MAAtBG,aACR,GAAI0B,GAAWA,IAAY1B,EAEzB,OADAc,KAAKR,SAAS,CAAEN,aAAc0B,IACvBD,EAAO,M,oBAIlB,WAAU,IACAzB,EAAiBc,KAAKjB,MAAtBG,aACR,OAAO,qBAAKkB,UAAU,QAAf,SAAwBlB,Q,GArBRgC","file":"static/js/login-view.f905cd7b.chunk.js","sourcesContent":["import { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { CSSTransition } from 'react-transition-group';\nimport Notification from '../Notification';\nimport '../Notification/Notification.css';\nimport { authOperations, authSelectors } from '../../redux/auth';\nimport Loader from '../Loader';\n\nclass LoginForm extends Component {\n  state = {\n    email: '',\n    password: '',\n    errorMessage: '',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { error, onClearError } = this.props;\n    if (error) {\n      this.showNotification(error);\n      onClearError();\n    }\n  }\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    const { email, password } = this.state;\n    const { onLogin } = this.props;\n\n    if (!email) return this.showNotification('Please enter email');\n    if (!password) return this.showNotification('Please enter password');\n\n    onLogin({ email, password });\n    this.setState({ email: '', password: '' });\n  };\n\n  showNotification = errorMessage => {\n    this.setState({ errorMessage });\n  };\n\n  render() {\n    const { email, password, errorMessage } = this.state;\n    const { isAuthLoading } = this.props;\n    return (\n      <>\n        <div className=\"Notification-wrapper\">\n          <CSSTransition in={!!errorMessage} classNames=\"Notification\" timeout={250} unmountOnExit>\n            <Notification onView={this.showNotification} message={errorMessage} />\n          </CSSTransition>\n        </div>\n\n        {isAuthLoading ? (\n          <Loader />\n        ) : (\n          <form onSubmit={this.handleSubmit}>\n            <label>\n              Email\n              <input\n                className=\"input\"\n                type=\"email\"\n                name=\"email\"\n                value={email}\n                onChange={this.handleChange}\n              ></input>\n            </label>\n            <label>\n              Password\n              <input\n                className=\"input\"\n                type=\"password\"\n                name=\"password\"\n                value={password}\n                onChange={this.handleChange}\n              ></input>\n            </label>\n            <br />\n            <button\n              className=\"btn-phonebook\"\n              type=\"submit\"\n              disabled={(!email && !password) || !!errorMessage}\n            >\n              Login\n            </button>\n          </form>\n        )}\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  isAuthLoading: authSelectors.getAuthLoading(state),\n  error: authSelectors.getAuthError(state),\n});\n\nconst mapDispatchToProps = {\n  onLogin: authOperations.login,\n  onClearError: authOperations.onClearErrorMessage,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm);\n","import LoginForm from '../components/LoginForm';\n\nconst LoginView = () => {\n  return (\n    <>\n      <h1>Login</h1>\n      <LoginForm />\n    </>\n  );\n};\n\nexport default LoginView;\n","import { Component } from 'react';\n\nclass Notification extends Component {\n  state = {\n    errorMessage: '',\n  };\n\n  componentDidMount() {\n    const { onView, message } = this.props;\n    this.setState({ errorMessage: message });\n    setTimeout(() => onView(''), 2000);\n  }\n  componentDidUpdate(prevProps, prevState) {\n    const { onView, message } = this.props;\n    const { errorMessage } = this.state;\n    if (message && message !== errorMessage) {\n      this.setState({ errorMessage: message });\n      return onView('');\n    }\n  }\n\n  render() {\n    const { errorMessage } = this.state;\n    return <div className=\"alert\">{errorMessage}</div>;\n  }\n}\n\nexport default Notification;\n"],"sourceRoot":""}